<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¢Ú©Ø§Ø¯Ù…ÛŒ Ø¯Ú©ØªØ± Ø§ÙØ´Ø§Ø±Ù…Ù†Ø´</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        @font-face { font-family: 'Doran'; src: url('fonts/DoranFaNum-Medium.ttf'); }
        body { background: #f4f7f6; font-family: 'Doran', sans-serif; }
        .gradient-loader { display: none; width: 100%; height: 5px; background: linear-gradient(90deg, #ff4b2b, #007bff, #ff4b2b); background-size: 200% 100%; animation: move 2s linear infinite; position: fixed; top: 0; z-index: 9999; }
        @keyframes move { 0%{background-position:200% 0} 100%{background-position:-200% 0} }
        .main-card { border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); border: none; }
        .btn-dash { padding: 20px; border-radius: 18px; font-weight: bold; margin-bottom: 15px; border: none; color: white; transition: 0.3s; width: 100%; text-align: right; display: flex; align-items: center; justify-content: space-between; }
        .btn-dash:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .btn-1 { background: linear-gradient(45deg, #1e3c72, #2a5298); }
        .btn-2 { background: linear-gradient(45deg, #11998e, #38ef7d); }
        .btn-3 { background: linear-gradient(45deg, #ee0979, #ff6a00); }
        .btn-4 { background: linear-gradient(45deg, #833ab4, #fd1d1d); }
        .quote-box { background: rgba(0,0,0,0.03); border-radius: 15px; padding: 15px; margin-bottom: 20px; font-size: 0.9rem; color: #555; border-right: 4px solid #007bff; }
    </style>
</head>
<body>
    <div id="loader" class="gradient-loader"></div>
    <div class="container d-flex align-items-center justify-content-center" style="min-height: 100vh;">
        
        <div id="login-sec" class="card main-card p-4 w-100" style="max-width: 400px;">
            <h3 class="text-center mb-4 fw-bold">ÙˆØ±ÙˆØ¯ Ø¯Ø§ÙˆØ·Ù„Ø¨</h3>
            <input type="text" id="user" class="form-control mb-3 text-center rounded-4 py-3" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
            <input type="password" id="pass" class="form-control mb-4 text-center rounded-4 py-3" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
            <button class="btn btn-primary w-100 py-3 fw-bold rounded-4" onclick="login()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„</button>
        </div>

        <div id="dash-sec" class="card main-card p-4 w-100 d-none" style="max-width: 500px;">
            <h4 id="welcome" class="text-center mb-2 text-primary fw-bold"></h4>
            <div id="quoteDisplay" class="quote-box">Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø¬Ù…Ù„Ù‡ Ø§Ù†Ú¯ÛŒØ²Ø´ÛŒ...</div>
            
            <button class="btn-dash btn-1" onclick="location.href='report.html'">
                <span>ğŸ“ ÙˆØ±ÙˆØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú¯Ø²Ø§Ø±Ø´</span> <span>ğŸ‘ˆ</span>
            </button>
            <button class="btn-dash btn-2" onclick="location.href='tracker.html?mode=study'">
                <span>ğŸ“Š Ø±Ø¯ÛŒØ§Ø¨ ØªØ­ØµÛŒÙ„ÛŒ</span> <span>ğŸ‘ˆ</span>
            </button>
            <button class="btn-dash btn-3" onclick="location.href='study.html'">
                <span>ğŸ“‹ Ú©Ø§Ø±ØªÚ©Ø³ Ø¨Ø±Ù†Ø§Ù…Ù‡</span> <span>ğŸ‘ˆ</span>
            </button>
            <button class="btn-dash btn-4" onclick="location.href='habits.html'">
                <span>âš¡ Ø±Ø¯ÛŒØ§Ø¨ Ø¹Ø§Ø¯Øªâ€ŒÙ‡Ø§</span> <span>ğŸ‘ˆ</span>
            </button>
            <button class="btn btn-light w-100 rounded-4 mt-2 text-muted" onclick="logout()">Ø®Ø±ÙˆØ¬ Ø§Ø² Ø­Ø³Ø§Ø¨</button>
        </div>
    </div>

    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxsfbe4IcPNP9xcLtlfpvmN2SLkgycHLUSZMS8K3RgnlC98kyDRw-8rakmMYbb_Jnhq/exec";
        
        // Ú†Ú© Ú©Ø±Ø¯Ù† Ù„Ø§Ú¯ÛŒÙ† Ø¨ÙˆØ¯Ù† Ú©Ø§Ø±Ø¨Ø±
        const savedProfile = JSON.parse(localStorage.getItem("profile"));
        if(savedProfile) {
            showDashboard(savedProfile);
        }

        async function login() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;
            document.getElementById('loader').style.display = 'block';
            try {
                const res = await fetch(SCRIPT_URL, {method:'POST', body:JSON.stringify({action:"login", username:u, password:p})});
                const data = await res.json();
                if(data.status === "success") {
                    localStorage.setItem("profile", JSON.stringify(data.user));
                    showDashboard(data.user);
                } else { alert(data.msg); }
            } catch(e) { alert("Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„"); }
            document.getElementById('loader').style.display = 'none';
        }

        function showDashboard(user) {
            document.getElementById('login-sec').classList.add('d-none');
            document.getElementById('dash-sec').classList.remove('d-none');
            document.getElementById('welcome').innerText = `Ø³Ù„Ø§Ù… ${user.firstName} Ø¬Ø§Ù†!`;
            
            // Ø¯Ø±ÛŒØ§ÙØª Ø¬Ù…Ù„Ù‡ Ø§Ø² Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ (Ù„ÛŒÙ†Ú© ÙØ§ÛŒÙ„ Raw Ø®ÙˆØ¯ Ø±Ø§ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ú©Ù†ÛŒØ¯)
            fetch('https://raw.githubusercontent.com/YOUR_USERNAME/YOUR_REPO/main/quotes.txt')
                .then(r => r.text()).then(text => {
                    const lines = text.split('\n').filter(l => l.trim() !== "");
                    document.getElementById('quoteDisplay').innerText = lines[Math.floor(Math.random() * lines.length)];
                }).catch(e => document.getElementById('quoteDisplay').innerText = "Ø§Ù…Ø±ÙˆØ² Ø±ÙˆØ² Ù¾ÛŒØ±ÙˆØ²ÛŒ ØªÙˆØ³Øª!");
        }

        function logout() {
            localStorage.removeItem("profile");
            location.reload();
        }
    </script>
</body>
</html>
