<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¢Ú©Ø§Ø¯Ù…ÛŒ Ø¯Ú©ØªØ± Ø§ÙØ´Ø§Ø±Ù…Ù†Ø´</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        @font-face { font-family: 'Doran'; src: url('fonts/DoranFaNum-Medium.ttf'); }
        body { background: #f4f7f6; font-family: 'Doran', sans-serif; }
        .gradient-loader { display: none; width: 100%; height: 5px; background: linear-gradient(90deg, #ff4b2b, #007bff, #ff4b2b); background-size: 200% 100%; animation: move 2s linear infinite; position: fixed; top: 0; }
        @keyframes move { 0%{background-position:200% 0} 100%{background-position:-200% 0} }
        .main-card { border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); border: none; }
        .btn-dash { padding: 20px; border-radius: 18px; font-weight: bold; margin-bottom: 15px; border: none; color: white; transition: 0.3s; width: 100%; }
        .btn-1 { background: linear-gradient(45deg, #1e3c72, #2a5298); }
        .btn-2 { background: linear-gradient(45deg, #11998e, #38ef7d); }
        .btn-3 { background: linear-gradient(45deg, #ee0979, #ff6a00); }
    </style>
</head>
<body>
    <div id="loader" class="gradient-loader"></div>
    <div class="container d-flex align-items-center justify-content-center" style="min-height: 100vh;">
        <div id="login-sec" class="card main-card p-4 w-100" style="max-width: 400px;">
            <h3 class="text-center mb-4">ÙˆØ±ÙˆØ¯ Ø¯Ø§ÙˆØ·Ù„Ø¨</h3>
            <input type="text" id="user" class="form-control mb-3 text-center" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ (tahsili38)">
            <input type="password" id="pass" class="form-control mb-4 text-center" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
            <button class="btn btn-primary w-100 py-3 fw-bold" onclick="login()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„</button>
        </div>
        <div id="dash-sec" class="card main-card p-4 w-100 d-none" style="max-width: 500px;">
            <h4 id="welcome" class="text-center mb-4 text-primary"></h4>
            <button class="btn-dash btn-1" onclick="location.href='report.html'">ğŸ“ ÙˆØ±ÙˆØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¬Ø¯ÛŒØ¯</button>
            <button class="btn-dash btn-2" onclick="location.href='tracker.html'">ğŸ“Š Ø±Ø¯ÛŒØ§Ø¨ ØªØ­ØµÛŒÙ„ÛŒ</button>
            <button class="btn-dash btn-3" onclick="location.href='study.html'">ğŸ–¨ï¸ Ø¯Ø±ÛŒØ§ÙØª Ú©Ø§Ø±ØªÚ©Ø³ Ø¨Ø±Ù†Ø§Ù…Ù‡</button>
        </div>
    </div>
    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyimURf79KriPsge81PcJhcd7L-C897A7xdvF9O05EsYt5s_3FUmhaIlR_lcL2vJMab/exec";
        async function login() {
            const u = document.getElementById('user').value;
            const p = document.getElementById('pass').value;
            document.getElementById('loader').style.display = 'block';
            try {
                const res = await fetch(SCRIPT_URL, {method:'POST', body:JSON.stringify({action:"login", username:u, password:p})});
                const data = await res.json();
                if(data.status === "success") {
                    localStorage.setItem("profile", JSON.stringify(data.user));
                    document.getElementById('login-sec').classList.add('d-none');
                    document.getElementById('dash-sec').classList.remove('d-none');
                    document.getElementById('welcome').innerText = `Ø³Ù„Ø§Ù… ${data.user.firstName} Ø¬Ø§Ù† Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ!`;
                } else { alert(data.msg); }
            } catch(e) { alert("Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„"); }
            document.getElementById('loader').style.display = 'none';
        }
    </script>
</body>
</html>
