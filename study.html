<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
    <style>
        @font-face { font-family: 'Doran'; src: url('https://cdn.fontcdn.ir/Font/Persian/Doran/Doran-Medium.ttf'); }
        body { background: #f0f2f5; font-family: 'Doran', Tahoma; padding: 20px; }
        .study-row { background: white; border-radius: 15px; display: flex; margin-bottom: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.03); overflow: hidden; }
        .time-col { width: 90px; background: #3a7bd5; color: white; padding: 15px; font-weight: bold; text-align: center; }
        .activity-col { flex-grow: 1; padding: 15px; cursor: grab; background: #fff; border-right: 1px solid #eee; }
        .stat-col { width: 70px; text-align: center; color: #3a7bd5; font-weight: bold; padding: 15px; background: #f8f9fa; }
    </style>
</head>
<body>
    <div class="container py-3" style="max-width: 500px;">
        <h4 class="fw-bold mb-4 text-center">ðŸ“‹ Ú©Ø§Ø±ØªÚ©Ø³ Ù†Ù‡Ø§ÛŒÛŒ</h4>
        <div id="sortableList"></div>
        <button class="btn btn-outline-success w-100 mt-4 rounded-pill py-3 fw-bold" onclick="window.print()">ðŸ“¥ Ø®Ø±ÙˆØ¬ÛŒ PDF</button>
    </div>
    <script>
        const stats = JSON.parse(localStorage.getItem('today_stats') || '{}');
        window.onload = async () => {
            // Fetch getDailyData...
            renderKardex(plan);
        };
        function renderKardex(plan) {
            const list = document.getElementById('sortableList');
            list.innerHTML = plan.map(l => `
                <div class="study-row">
                    <div class="time-col">${l.time}</div>
                    <div class="activity-col">${l.fullName}</div>
                    <div class="stat-col">${stats[l.time] || 0}</div>
                </div>`).join('');
            new Sortable(list, { animation: 150, handle: '.activity-col' });
        }
    </script>
</body>
</html>
