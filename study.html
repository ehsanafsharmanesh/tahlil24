// جایگزین اسکریپت قبلی در study.html
const API_BASE_URL = localStorage.getItem("planner_api");
const currentCode = localStorage.getItem("planner_code");

async function loadProfile() {
  const res = await fetch(API_BASE_URL + "/api/get-profile", {
    method: "POST",
    body: JSON.stringify({ code: currentCode })
  });
  const data = await res.json();
  // اینجا می‌توانید نمودارها را با data.history آپدیت کنید
}

document.getElementById("saveFab").addEventListener("click", async () => {
  const newData = { /* مقادیر فرم شما */ hours: 5, status: "good" };
  await fetch(API_BASE_URL + "/api/save", {
    method: "POST",
    body: JSON.stringify({ code: currentCode, newData })
  });
  alert("اطلاعات ذخیره و پروفایل شما به‌روزرسانی شد.");
});

loadProfile();
