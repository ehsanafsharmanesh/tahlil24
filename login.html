<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ù¾Ù†Ù„ Ø¢Ú©Ø§Ø¯Ù…ÛŒ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); height: 100vh; display: flex; align-items: center; justify-content: center; font-family: Tahoma; }
        .login-box { background: white; padding: 40px; border-radius: 30px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
    </style>
</head>
<body>
    <div class="login-box text-center">
        <h3 class="fw-bold text-primary mb-4">ÙˆØ±ÙˆØ¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</h3>
        <input type="text" id="user" class="form-control form-control-lg mb-3 rounded-pill text-center" placeholder="Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ">
        <input type="password" id="pass" class="form-control form-control-lg mb-4 rounded-pill text-center" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±">
        <button id="loginBtn" class="btn btn-primary btn-lg w-100 rounded-pill shadow" onclick="login()">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… ðŸ”“</button>
        <div id="msg" class="text-danger mt-3 small"></div>
    </div>

    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxiFk6ICEcvTV63XQImvN3lSgOA2AdtjihEl-8xZmHyi97l4qd0zADmqRn8nnrwcQDj/exec";

        async function login() {
            const btn = document.getElementById('loginBtn');
            btn.disabled = true; btn.innerText = "Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...";
            
            try {
                const res = await fetch(SCRIPT_URL, {method:'POST', body:JSON.stringify({
                    action:"login", username: document.getElementById('user').value, password: document.getElementById('pass').value
                })});
                const data = await res.json();
                
                if(data.status === "success") {
                    localStorage.setItem("profile", JSON.stringify(data.user));
                    window.location.href = "index.html";
                } else {
                    document.getElementById('msg').innerText = "Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª.";
                }
            } catch (e) {
                document.getElementById('msg').innerText = "Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³Ø±ÙˆØ±.";
            }
            btn.disabled = false; btn.innerText = "ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… ðŸ”“";
        }
    </script>
</body>
</html>
